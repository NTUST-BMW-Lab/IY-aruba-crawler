<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RSSIIY-Doxygen: Dashboard Development</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RSSIIY-Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Dashboard Development</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> After <a href="https://github.com/nguyennam2010/RSSIIY/blob/main/README.md#c-query-data-from-databases-to-wise-paas">pushing MongoDB data to Dashboard</a>, this is how you develop the Dashboard.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Method</h1>
<p>Two main methods in Dashboard development: Direct (MongoDB - Dashboard) and indirect visualization (MongoDB - DataHub - SaaS Composer - Dashboard).</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/2401a8a3-e246-4d68-8822-f23c9e9197de" alt="image" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Variables</h1>
<p>Create variables for AP and floor.</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/22058ec8-5692-4185-aba2-1b65819c9cfd" alt="01" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md3"></a>
AP information</h1>
<ul>
<li>Query:</li>
</ul>
<div class="fragment"><div class="line">db.Controller_4.aggregate([</div>
<div class="line">{&quot;$sort&quot;:{&quot;ts&quot;:-1, &quot;Client&quot;:-1}},</div>
<div class="line">{&quot;$match&quot;: {&quot;AP Name&quot;:&quot;$ap&quot;, &quot;ts&quot;:{ &quot;$gte&quot; : &quot;$from&quot;}}}, </div>
<div class="line">{&quot;$project&quot;: {&quot;_id&quot;:0,&quot;AP Name&quot;:&quot;$AP Name&quot;, &quot;Client&quot;:&quot;$Client&quot;,&quot;IP Address&quot;:&quot;$IP address&quot;,&quot;MAC Address&quot;:&quot;$MAC address&quot;,&quot;Model&quot;:&quot;$Model&quot;,&quot;AP Group&quot;:&quot;$AP_Group&quot;, &quot;TW Time&quot;:&quot;$DatetimeStr&quot;}},</div>
<div class="line">{&quot;$limit&quot;:1}</div>
<div class="line">            ])</div>
</div><!-- fragment --><p> Note: In this query, <code>Controller_4</code> is the collection of the AP database, which named <code>Aruba_AP</code>. The query is same as you query data in your MongoDB.</p>
<ul>
<li>Result:</li>
</ul>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/a09b211c-33ed-4666-86b6-2665ee9db4a2" alt="02" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Client number</h1>
<ul>
<li>Query (2.4 GHz):</li>
</ul>
<div class="fragment"><div class="line">db.AP_List.aggregate([</div>
<div class="line">{&quot;$match&quot;: {&quot;ap_name&quot;:&quot;$ap&quot;,&quot;radio_band&quot;: 0, &quot;ts&quot;:{ &quot;$gte&quot; : &quot;$from&quot;, &quot;$lt&quot;:&quot;$to&quot;}}}, </div>
<div class="line">{&quot;$project&quot;: {&quot;_id&quot;:0, &quot;name&quot;:&quot;2.4 GHz&quot;, &quot;ap_name&quot;:&quot;$ap&quot;, &quot;value&quot;:&quot;$sta_count&quot;,&quot;ts&quot;:&quot;$ts&quot;}}</div>
<div class="line">            ])</div>
</div><!-- fragment --><p> Note: You need to Add Query to query 5GHz, then it can show in the map together as the pic below.</p>
<ul>
<li>Result:</li>
</ul>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/3fab722b-c8cd-4320-8ccf-31e0ada1d0e2" alt="03" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Noise floor</h1>
<ul>
<li>Query (5 GHz):</li>
</ul>
<div class="fragment"><div class="line">db.AP_List.aggregate([</div>
<div class="line">{&quot;$match&quot;: {&quot;ap_name&quot;:&quot;IY_1F_AP01&quot;,&quot;radio_band&quot;:1,  &quot;ts&quot;:{ &quot;$gte&quot; : &quot;$from&quot;, &quot;$lt&quot;:&quot;$to&quot;}}}, </div>
<div class="line">{&quot;$project&quot;: {&quot;_id&quot;:0,&quot;name&quot;:&quot;5 GHz&quot;, &quot;value&quot;:&quot;$noise_floor&quot;,&quot;ts&quot;:&quot;$ts&quot;}}</div>
<div class="line">            ])</div>
</div><!-- fragment --><ul>
<li>Result:</li>
</ul>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/960534b2-20f5-4372-afdd-c6691e2e10e4" alt="04" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Channel utilization</h1>
<ul>
<li>Query (2.4 GHz - tx time):</li>
</ul>
<div class="fragment"><div class="line">db.AP_List.aggregate([</div>
<div class="line">{&quot;$match&quot;: {&quot;ap_name&quot;:&quot;$ap&quot;,&quot;radio_band&quot;: 0, &quot;ts&quot;:{ &quot;$gte&quot; : &quot;$from&quot;, &quot;$lt&quot;:&quot;$to&quot;}}}, </div>
<div class="line">{&quot;$project&quot;: {&quot;_id&quot;:0, &quot;name&quot;:&quot;tx time&quot;, &quot;value&quot;:&quot;$tx_time&quot;,&quot;ts&quot;:&quot;$ts&quot;}}</div>
<div class="line">            ])</div>
</div><!-- fragment --><ul>
<li>Result:</li>
</ul>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/02db0e81-a0ea-42a2-b458-22adbf2ed9b3" alt="05" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Client information</h1>
<ul>
<li>Query:</li>
</ul>
<div class="fragment"><div class="line">db.Controller_4.aggregate([</div>
<div class="line">{&quot;$sort&quot;:{&quot;ts&quot;:-1, &quot;Client&quot;:-1}},</div>
<div class="line">{&quot;$match&quot;: {&quot;ap_name&quot;:&quot;$ap&quot;, &quot;ts&quot;:{ &quot;$gte&quot; : &quot;$from&quot;, &quot;$lt&quot;:&quot;$to&quot;}}}, </div>
<div class="line">{&quot;$project&quot;: {&quot;_id&quot;:0,&quot;Client User Name&quot;:&quot;$client_user_name&quot;, &quot;MAC Address&quot;:&quot;$sta_mac_address&quot;,&quot;IP Address&quot;:&quot;$client_ip_address&quot;,&quot;OS&quot;:&quot;$client_dev_type&quot;,&quot;WLAN&quot;:&quot;$ssid&quot;,&quot;AP Name&quot;:&quot;$ap&quot;,&quot;Client Health&quot;:&quot;$client_health&quot;, &quot;Radio Band&quot;:&quot;$radio_band&quot;,&quot;Channel&quot;:&quot;$channel&quot;,&quot;SNR&quot;:&quot;$snr&quot;,&quot;TW Time&quot;:&quot;$DatetimeStr&quot;}},</div>
<div class="line">{&quot;$limit&quot;:100}</div>
<div class="line">])</div>
</div><!-- fragment --><ul>
<li>Result:</li>
</ul>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/f4e88179-e9b7-4418-981a-2a8ac6a5a41f" alt="06" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md8"></a>
Client map</h1>
<p>To visualize as map in Dashboard, you need to push your data to DataHub.</p>
<p>First, you need to download SDK code from <a href="https://docs.wise-paas.advantech.com/en/Guides_and_API_References/Data_Acquisition/DataHub/py_Edge_SDK_Manual/v1.1.7">WISE-PaaS documentation</a></p>
<p>Their code for random data generation:</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/c77899be-7ef4-423a-ac4c-d67b36c1ddd4" alt="image" class="inline"/></p>
<p>You need to adjust the above code to connect to DataHub. For example, push AP name and Client number from MongoDB:</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/2b754e42-e9e8-4139-9645-94ee5af6d608" alt="08" class="inline"/></p>
<p>Then you can push the data to DataHub follow this video: <a href="https://www.youtube.com/watch?v=IP46vcWuHhY">https://www.youtube.com/watch?v=IP46vcWuHhY</a></p>
<p>Now you edit Composer to bind the data to the map. Create appropriate assets and bind the corresponding data from DataHub:</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/a961c912-a397-4544-987e-d23d37bbafb4" alt="09" class="inline"/></p>
<p>Use advanced setting to change color of the Client nodes:</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/7665bc20-bf1d-408f-be93-0b44021bbc21" alt="010" class="inline"/></p>
<div class="fragment"><div class="line">function(value, oldValue, option){ </div>
<div class="line">    if(value&gt;=10) return &quot;symbols/builtIn/large transformer/red light.json&quot;;</div>
<div class="line">    if(value&lt;10 &amp; value&gt;2) return &quot;symbols/builtIn/large transformer/yellow light.json&quot;;</div>
<div class="line">    if(value&lt;=2) {value=0;return &quot;symbols/builtIn/large transformer/green light.json&quot;;}</div>
<div class="line">    else return &quot;symbols/builtIn/large transformer/green light.json&quot;;}</div>
</div><!-- fragment --><ul>
<li>Now the map can show number of clients and color corresponding to the data.<ul>
<li>Green light: &lt; 2 users (clients)</li>
<li>Yellow light: 2 &lt; users &lt; 10</li>
<li>Red light: &gt; 10 users</li>
</ul>
</li>
</ul>
<p>In Dashboard, create a panel, choose SaaS Composer-Viewer and choose the SaaS Composer directory to the file setting:</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/656bde70-bb0a-43d4-a145-66cbadd9d6b7" alt="011" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md9"></a>
Interference map</h1>
<p>Same as Client map, you import the IY building map to SaaS Composer and bind their (x, y) variables.</p>
<p><img src="https://github.com/nguyennam2010/RSSIIY/assets/102983698/fdb3ab37-25d9-48ab-aed5-a1ef6ceabe3e" alt="012" class="inline"/></p>
<p>In Dashboard, create a panel for Interference Map and choose the directory same as Client Map. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
